{{ define "main" }}
<div class="container">
    <!-- Header de sección -->
    <header class="section-header">
        <h1>{{ .Title }}</h1>
    </header>

    <div class="row">
        <!-- Columna Principal -->
        <div class="col-md-9" id="blog-listing">
            {{ $paginator := .Paginate (where .Data.Pages "Type" "in" .Site.Params.mainSections) }}
            {{ range $paginator.Pages }}
            <article class="post-card">
                <div class="row">
                    <div class="col-md-5">
                        <a href="{{ .Permalink }}" class="post-image">
                            {{ if .Params.featured_image }}
                            <img src="{{ .Params.featured_image | relURL }}" alt="{{ .Title }}" class="img-responsive" />
                            {{ end }}
                        </a>
                    </div>
                    <div class="col-md-7">
                        <div class="post-content">
                            <div class="post-meta">
                                {{ if isset .Params "date" }}
                                <time datetime="{{ .Date.Format "2006-01-02" }}">
                                    {{ .Date.Format .Site.Params.date_format }}
                                </time>
                                {{ end }}
                                
                                {{ if isset .Params "categories" }}
                                <span class="categories">
                                    {{ range $index, $category := .Params.categories }}
                                    {{ if $index }} · {{ end }}
                                    <a href="{{ "categories/" | relLangURL }}{{ . | urlize | lower }}">
                                        {{ $category }}
                                    </a>
                                    {{ end }}
                                </span>
                                {{ end }}
                            </div>

                            <h2 class="post-title">
                                <a href="{{ .Permalink }}">{{ .Title }}</a>
                            </h2>
                            
                            {{ if not .Site.Params.recent_posts.hide_summary }}
                            <p class="post-summary">{{ .Summary }}</p>
                            <a href="{{ .Permalink }}" class="read-more">
                                {{ i18n "continueReading" }}
                                <i class="fas fa-arrow-right"></i>
                            </a>
                            {{ end }}
                        </div>
                    </div>
                </div>
            </article>
            {{ end }}

            <!-- Paginación -->
            {{ if or .Paginator.HasPrev .Paginator.HasNext }}
            <nav class="pagination-wrapper">
                <ul class="pagination">
                    {{ if .Paginator.HasPrev }}
                    <li class="page-item">
                        <a href="{{ .Paginator.Prev.URL | relURL }}" class="page-link">
                            <i class="fas fa-arrow-left"></i> {{ i18n "newer" }}
                        </a>
                    </li>
                    {{ end }}

                    {{ if .Paginator.HasNext }}
                    <li class="page-item">
                        <a href="{{ .Paginator.Next.URL | relURL }}" class="page-link">
                            {{ i18n "older" }} <i class="fas fa-arrow-right"></i>
                        </a>
                    </li>
                    {{ end }}
                </ul>
            </nav>
            {{ end }}
        </div>

        <!-- Sidebar -->
        <div class="col-md-3">
            {{ partial "sidebar.html" . }}
        </div>
    </div>
</div>
{{ end }}